
#
# Compare two accession records and see if fields match.
#
s1 <- '{"lock_version":0,"suppressed":false,"title":"Understanding The Universe","display_string":"Understanding The Universe","publish":true,"provenance":"ACQUIRED HOW OR DONOR: PR","accession_date":"1999-02-12","restrictions_apply":false,"access_restrictions":true,"access_restrictions_note":"No Release On File","use_restrictions":false,"created_by":"admin","last_modified_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-10-19T22:49:33Z","user_mtime":"2015-10-19T22:49:33Z","id_0":"1999","id_1":"00105","jsonmodel_type":"accession","external_ids":[{"external_id":"4874","source":"Excel File :: ACCESSION","created_by":"admin","last_modified_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-10-19T22:49:33Z","user_mtime":"2015-10-19T22:49:33Z","jsonmodel_type":"external_id"}],"related_accessions":[],"classifications":[],"subjects":[{"ref":"/subjects/17"},{"ref":"/subjects/31"},{"ref":"/subjects/57"}],"linked_events":[],"extents":[{"lock_version":0,"number":"1","physical_details":"MEDIUM: Audio Tape; FORMAT: DAT; QUANTITY: 1","created_by":"admin","last_modified_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-11-25T18:05:34Z","user_mtime":"2015-10-19T22:49:33Z","portion":"whole","extent_type":"Multimedia","jsonmodel_type":"extent"}],"dates":[{"lock_version":0,"expression":"1968-02-07","created_by":"admin","last_modified_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-10-19T22:49:33Z","user_mtime":"2015-10-19T22:49:33Z","date_type":"single","label":"creation","jsonmodel_type":"date"}],"external_documents":[],"rights_statements":[],"deaccessions":[],"related_resources":[],"linked_agents":[{"role":"creator","terms":[],"ref":"/agents/people/1075"}],"instances":[],"uri":"/repositories/2/accessions/2222","repository":{"ref":"/repositories/2"},"user_defined":{"lock_version":0,"boolean_1":false,"boolean_2":false,"boolean_3":false,"text_2":"12-Feb-1999: Original accession\\n","text_3":"Date Record Created: 26-Feb-1999","text_4":"Storage Location: A/V Archive","created_by":"admin","last_modified_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-10-19T22:49:33Z","user_mtime":"2015-10-19T22:49:33Z","jsonmodel_type":"user_defined","repository":{"ref":"/repositories/2"}}}'
s2 <- '{"lock_version":0,"created_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-10-19T22:49:33Z","user_mtime":"2015-10-19T22:49:33Z","last_modified_by":"admin","id":2222,"suppressed":false,"title":"Understanding The Universe","display_string":"Understanding The Universe","publish":true,"provenance":"ACQUIRED HOW OR DONOR: PR","accession_date":"1999-02-12","id_0":"1999","id_1":"00105","external_ids":[{"external_id":"4874","source":"Excel File :: ACCESSION","created_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-10-19T22:49:33Z","user_mtime":"2015-10-19T22:49:33Z","last_modified_by":"admin"}],"subjects":[{"ref":"/subjects/17"},{"ref":"/subjects/31"},{"ref":"/subjects/57"}],"extents":[{"lock_version":0,"created_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-11-25T18:05:34Z","user_mtime":"2015-10-19T22:49:33Z","last_modified_by":"admin","number":"1","physical_details":"MEDIUM: Audio Tape; FORMAT: DAT; QUANTITY: 1","portion":"whole","extent_type":"Multimedia"}],"dates":[{"jsonmodel_type":"date","lock_version":0,"expression":"1968-02-07","created_by":"admin","create_time":"2015-10-19T22:49:33Z","system_mtime":"2015-10-19T22:49:33Z","user_mtime":"2015-10-19T22:49:33Z","last_modified_by":"admin","date_type":"single","label":"creation"}],"linked_agents":[{"lock_version":0}],"uri":"/repositories/2/accessions/2222","repository":{"ref":"/repositories/2"},"user_defined":{"boolean_1":false,"boolean_2":false,"boolean_3":false,"create_time":"2015-10-19T22:49:33Z","created_by":"admin","jsonmodel_type":"user_defined","last_modified_by":"admin","lock_version":0,"repository":{"ref":"/repositories/2"},"system_mtime":"2015-10-19T22:49:33Z","text_2":"12-Feb-1999: Original accession\\n","text_3":"Date Record Created: 26-Feb-1999","text_4":"Storage Location: A/V Archive","user_mtime":"2015-10-19T22:49:33Z"},"access_restrictions":true,"access_restrictions_note":"No Release On File"}'

t1 <- jsonlite::fromJSON(s1)
t2 <- jsonlite::fromJSON(s2)

isSame <- function (fieldname, d1, d2) {
  v1 <- d1[[fieldname]]
  v2 <- d2[[fieldname]]
  if (v1 == v2) {
    return(TRUE)
  }
  cat(paste(v1,v2, sep = "|"))
  return(FALSE)
}

isSame("suppressed", t1, t2)
